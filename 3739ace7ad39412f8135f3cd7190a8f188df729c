{
  "comments": [
    {
      "key": {
        "uuid": "f6849a75_7acb5c7a",
        "filename": "docs/reference.md",
        "patchSetId": 5
      },
      "lineNbr": 1423,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2019-04-03T12:17:45Z",
      "side": 1,
      "message": "In https://reviews.llvm.org/D60130 I don\u0027t set bundle_resources_dir for one of the bundles (it doesn\u0027t have a Resources dir) and that seems to work fine too. Maybe none of these are required?",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98cceae5_adb0e06c",
        "filename": "docs/reference.md",
        "patchSetId": 5
      },
      "lineNbr": 1423,
      "author": {
        "id": 1000070
      },
      "writtenOn": "2019-04-03T12:57:35Z",
      "side": 1,
      "message": "I guess this will break your CL, but I agree that this is unfortunate.\n\nAre those properties required? bundle_root_dir is required because otherwise there is no way for the bundle_data to communicate the correct path for the file (since the same bundle_data target may be depended on by multiple create_bundle target, thus the path in bundle_data outputs needs to use some indirection which is provided by {{bundle_root_dir}} expansion).\n\nRegarding the other properties, it is less clear. Currently if the property is not set and the corresponding expansion is used, the {{bundle_foo_dir}} will be expanded to an empty string and will result in a really hard to understand error at build time, e.g.:\n\n    ninja: error: \u0027../../ios_chrome_autofill_automation_egtests_module.xctest\u0027, needed by \u0027obj/ios/chrome/test/earl_grey/ios_chrome_autofill_automation_egtests.codesigning.inputdeps.stamp\u0027, missing and no known rule to make it\n\nI got that error after removing bundle_plugins_dir everywhere except in one place. The {{bundle_plugins_dir}}/{{source_file_part}} was expanded to a path starting with a / which was assumed to be relative to repository root.\n\nCurrently the code performing the substitution does not report an error. I can see a way to add such an error reporting (at least for bundle_data targets), however this will require a larger CL.\n\nI can either add the error reporting as a followup CL (thus resulting in a breakage for your use case if gn is rolled between the two CLs) or adding it first and waiting for it before landing current CL.\n\nWhat do you think?",
      "parentUuid": "f6849a75_7acb5c7a",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b8ded41_1733d4fb",
        "filename": "docs/reference.md",
        "patchSetId": 5
      },
      "lineNbr": 1423,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2019-04-03T13:00:13Z",
      "side": 1,
      "message": "I think \"silently do something weird\" is at least consistent with how other things in gn behave -- say if you don\u0027t have a cxx tool in your toolchain, all cc files are silently not compiled etc. So I\u0027d probably recommend keeping these not required (so that it\u0027s ok to not set the when not used), updating the docs, and maybe add an error message later for when they\u0027re used but not defined.",
      "parentUuid": "98cceae5_adb0e06c",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34a993c8_501fc054",
        "filename": "docs/reference.md",
        "patchSetId": 5
      },
      "lineNbr": 1423,
      "author": {
        "id": 1000070
      },
      "writtenOn": "2019-04-03T14:22:37Z",
      "side": 1,
      "message": "I decided to do the fix as a prerequisite CL.\n\nhttps://gn-review.googlesource.com/c/gn/+/4482",
      "parentUuid": "4b8ded41_1733d4fb",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "573937cd_e876ad95",
        "filename": "docs/reference.md",
        "patchSetId": 5
      },
      "lineNbr": 1494,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2019-04-03T12:17:45Z",
      "side": 1,
      "message": "Sorry, I forgot to mention this last time: I think this needs to be $target_name here. (Also, the $foo / ${foo} style in the example is somewhat self-inconsistent. I personally only use ${foo} when I must and $foo else, but I suppose I can see the case for using ${foo} always. Right not the example doesn\u0027t follow either style though.)",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "634cff7f_f2dbf61e",
        "filename": "docs/reference.md",
        "patchSetId": 5
      },
      "lineNbr": 1494,
      "author": {
        "id": 1000070
      },
      "writtenOn": "2019-04-03T12:57:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "573937cd_e876ad95",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0368ceac_99c181a8",
        "filename": "tools/gn/create_bundle_target_generator.cc",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1000019
      },
      "writtenOn": "2019-04-03T12:17:45Z",
      "side": 1,
      "message": "Oh -- does this mean this will break https://reviews.llvm.org/D60130 ?\n\nWhat\u0027s the argument for making any of these required?",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "270486de_1f26dfba",
        "filename": "tools/gn/create_bundle_target_generator.cc",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 1000070
      },
      "writtenOn": "2019-04-03T12:57:35Z",
      "side": 1,
      "message": "See my other comment.",
      "parentUuid": "0368ceac_99c181a8",
      "revId": "3739ace7ad39412f8135f3cd7190a8f188df729c",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac",
      "unresolved": false
    }
  ]
}