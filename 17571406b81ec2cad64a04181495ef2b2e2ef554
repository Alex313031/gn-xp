{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1ae0bfad_02e04cf9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-03-23T08:30:09Z",
      "side": 1,
      "message": "Hey Brett,\n\nI had updated the patch, Can you please check this.",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69ccd439_94861b01",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-03-24T01:54:31Z",
      "side": 1,
      "message": "Insert empty line above?",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea2fdf30_8621b2c7",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 118,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-03-24T07:12:56Z",
      "side": 1,
      "message": "okay.",
      "parentUuid": "69ccd439_94861b01",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a8ad66b_a6e07baa",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-03-23T08:45:29Z",
      "side": 1,
      "message": "Does this work for invocations other than from bash?\nhttps://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html#:~:text\u003dor%20shell%20script.-,%24_,-The%20underscore%20variable",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fb08ae8_dd29d789",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-03-23T09:41:05Z",
      "side": 1,
      "message": "Yes, It is working fine in ksh shell also.",
      "parentUuid": "3a8ad66b_a6e07baa",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f047099d_b60d7c04",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-03-24T01:54:31Z",
      "side": 1,
      "message": "But how did you ensure that for other shells?",
      "parentUuid": "5fb08ae8_dd29d789",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f79dfd3_0d47458b",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-03-24T07:12:56Z",
      "side": 1,
      "message": "In AIX the by default shell is ksh So I had tested it in both ksh \u0026 bash shell, and it is wokring fine.",
      "parentUuid": "f047099d_b60d7c04",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2fb61ba_9cd206ee",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-03-24T08:05:36Z",
      "side": 1,
      "message": "I think it is strange if GN for AIX only supports bash and ksh. Why not use appropriate system call for this?",
      "parentUuid": "8f79dfd3_0d47458b",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b09bee0_d8e08bf5",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-03-29T09:00:18Z",
      "side": 1,
      "message": "Actually the code is not depended to any kind of shell, It will work fine \nregardless of any shell.",
      "parentUuid": "f2fb61ba_9cd206ee",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c81e85b8_313c9367",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-03-30T06:13:40Z",
      "side": 1,
      "message": "I stll don\u0027t think that is guaranteed.\ne.g. Although most of popular shell may support this, someone can create their own shell which doesn\u0027t have this feature.",
      "parentUuid": "0b09bee0_d8e08bf5",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54c32aae_62b9daab",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-03-30T18:55:15Z",
      "side": 1,
      "message": "I had added this part of code snippet to pass gn unittests on AIX,and it does not have any shell dependency. Like other operating system I just added the function specific to AIX.",
      "parentUuid": "c81e85b8_313c9367",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e905936_27642c00",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-04-06T02:51:36Z",
      "side": 1,
      "message": "I still think AIX has system call to get executable path like other OSs. Could you find and use that here?",
      "parentUuid": "54c32aae_62b9daab",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ddba7e0_99e2eb8b",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-05-11T09:31:54Z",
      "side": 1,
      "message": "Hey Takuto Ikuta,\n\nI had checked but we don\u0027t have any system call in AIX to get executable path like other OSs. So, as a temporary solution I\u0027ve added this code snippet.Can you please review it and update me if any changes require.\n\nThank you.",
      "parentUuid": "2e905936_27642c00",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55a0817f_06e54e84",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-05-12T06:57:01Z",
      "side": 1,
      "message": "I see. Could you do like\nhttps://github.com/llvm/llvm-project/blob/0833a9a7962892584a3c2728a710300a3a2c7169/llvm/lib/Support/Unix/Path.inc#L238\nthen?",
      "parentUuid": "6ddba7e0_99e2eb8b",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5bc3ad26_1d435f92",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-05-29T07:05:42Z",
      "side": 1,
      "message": "Hello Takuto Ikuta ,\n\nI had checked and \"https://github.com/llvm/llvm-project/blob/0833a9a7962892584a3c2728a710300a3a2c7169/llvm/lib/Support/Unix/Path.inc#L238\" - this is not a suitable approach which we can use on Aix.\n\nMeanwhile I was running format testcases, some of the testcases are failing and while analyzing got to know that the tests internally switches the directory and due to which the path of the directory is unknown.\n\n\nSo Tried with another solution -\n\nexe_path.h\u2028\n#if defined(OS_AIX)\nchar absolutePathBuf[PATH_MAX] \u003d {0};\n#endif\u2028\u2028\u2028\u2028\u2028\u2028\n\n\nexe_path.cc\u2028\u2028\n#elif defined(OS_AIX)\nbase::FilePath GetExePath() {\n  char *exec_name;\n  if(!*absolutePathBuf){\n    exec_name \u003d getenv(\"_\");\n    realpath(exec_name,absolutePathBuf);\n    if (absolutePathBuf \u003d\u003d NULL) {\n      return base::FilePath();\n    }\n  }\n  return base::FilePath(absolutePathBuf);\n}\n\n - Here using a global variable as the execution path remains the same and is not necessary to be fetched on every test(FormatTest.XXX).\n\n - The above solution is able to pass all the testcases failing on AIX.",
      "parentUuid": "55a0817f_06e54e84",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d099d3e8_13e6c12e",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1000030
      },
      "writtenOn": "2023-05-30T01:06:26Z",
      "side": 1,
      "message": "\u003e this is not a suitable approach which we can use on Aix.\n\nWhy that is not suitable solution here while it works for llvm?",
      "parentUuid": "5bc3ad26_1d435f92",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "672e2c61_6044a361",
        "filename": "src/util/exe_path.cc",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1002587
      },
      "writtenOn": "2023-06-22T10:16:47Z",
      "side": 1,
      "message": "I had checked it and quite not sure how it is working on llvm code.\nWe can not check it also as it won\u0027t support our environment. As of now I\u0027m providing a temporary solution until we have some specific system call for that.\nPlease do check patchset4 and otherwise it will create some other issues related to gn build on AIX.\n\n\nexe_path.h\u2028\n\n#if defined(OS_AIX)\nchar absolutePathBuf[PATH_MAX] \u003d {0};\n\n#endif\u2028\u2028\u2028\u2028\u2028\u2028\n\nexe_path.cc\u2028\u2028\n\n#elif defined(OS_AIX)\nbase::FilePath GetExePath() {\nchar exec_name;\nif(!absolutePathBuf){\nexec_name \u003d getenv(\"_\");\nrealpath(exec_name,absolutePathBuf);\nif (absolutePathBuf \u003d\u003d NULL) {\nreturn base::FilePath();\n}\n}\nreturn base::FilePath(absolutePathBuf);\n}\n\n     \nHere using a global variable as the execution path remains the same and is not necessary to be fetched on every test(FormatTest.XXX).\n\nThe above solution is able to pass all the testcases failing on AIX.",
      "parentUuid": "d099d3e8_13e6c12e",
      "revId": "17571406b81ec2cad64a04181495ef2b2e2ef554",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    }
  ]
}