{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e54e81c1_d52e7385",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000803
      },
      "writtenOn": "2020-10-11T00:46:17Z",
      "side": 1,
      "message": "Hi all,\n\nFollowing the discussion from https://groups.google.com/a/chromium.org/forum/#!topic/gn-dev/QDvOuquATJE, would you please help review this CL on exposing a command line switch to tell GN where to find the top-level BUILD.gn to load first? From experiments, it seems this will perfectly fit our needs (achieving kind of \"partial configuration\" of chromium to share the icu library between Chrome and CrOS). Thanks!\n\nBest,\nHonglin",
      "revId": "e61b025f7a8091ee896a53287c71837ff5ee5007",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "478e0edb_30981015",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2020-10-11T03:01:03Z",
      "side": 1,
      "message": "We used to have this to support NaCl and it was removed because we didn\u0027t need it anymore and it added extra complexity. Needless to say, I\u0027m not super enthusiastic about adding it back.\n\nCan you please follow up on the email thread? Dirk had some good suggestions that you did not reply to.",
      "revId": "e61b025f7a8091ee896a53287c71837ff5ee5007",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a71a34b_6c115a9a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000803
      },
      "writtenOn": "2020-10-11T05:34:16Z",
      "side": 1,
      "message": "Hi Brett,\n\nThanks for the super quick reply! Dirk and I have had a long discussion after that. I will forward those emails to you. This CL was actually inspired from one of his suggestions (otherwise, I will never notice that we can do this). \n\nBest,\nHonglin",
      "parentUuid": "478e0edb_30981015",
      "revId": "e61b025f7a8091ee896a53287c71837ff5ee5007",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b18fbbc_bc2ac399",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000803
      },
      "writtenOn": "2020-10-11T09:41:24Z",
      "side": 1,
      "message": "Hi Brett,\n\nPlease let me explain a bit more on why this feature is useful for us:\n\n1. \"share icu library\": One current big issue for CrOS is that the free space of the rootfs is very small. And icu is a big library, most of which is a data file (in chrome it is 10MB whereas by default it is \u003e30MB). So we decide to share this data file between Chrome and CrOS. But to use this data file, we must keep CrOS\u0027s icu and Chromium\u0027s icu in lock step. So directly compiling a libicu.a is from Chrome in CrOS is a straight-forward solution.\n   Another goodness of sharing libicu is that we save developers effort to uprev icu in CrOS. libicu needs regular major uprev every 6 months and minor bug fixes from time to time. By sharing the code, CrOS can enjoy such uprev for free.\n\n2. (The CrOS build team proposed this) In the long term, we may share more code between chrome and CrOS. For example, we may even share libchrome/libmojo etc. directly by the way similar to icu rather than the current mechanism (which is effort consuming and hard to make the code up-to-date). \"Sharing icu\" is treated as a template for sharing code between chrome and CrOS. And we want to find a standard and generic way to do this.\n\n3. In compiling libicu.{a,so} from chromium repo, if GN does not support \"partial configuration\", we have to configure the whole chromium to run \"gn gen\". This is very error-prone and brings lots of unnecessary complexity to the icu ebuild in CrOS.\n\nConsidering the benefit the new switch \"root_build_file_dir\", I feel the extra complexity added to GN is relatively not very big (just one extra switch affecting one global/starting variable \"root\"). What do you think? If the idea of this CL is really not acceptable, could you please provide some other suggestions, which will be highly appreciated?\n\nThanks!\n\nBest,\nHonglin\n",
      "revId": "e61b025f7a8091ee896a53287c71837ff5ee5007",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "56e9fff5_59e3ae4f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000803
      },
      "writtenOn": "2020-10-13T21:01:33Z",
      "side": 1,
      "message": "Friendly ping, shall we discuss more about this? After more thinking, I really feel this small change will be a game changer for our project. Thanks!",
      "revId": "e61b025f7a8091ee896a53287c71837ff5ee5007",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    }
  ]
}