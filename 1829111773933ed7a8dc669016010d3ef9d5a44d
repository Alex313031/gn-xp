{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3d8e949e_74ea2908",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001498
      },
      "writtenOn": "2022-06-25T06:31:34Z",
      "side": 1,
      "message": "Brett, I\u0027m OOO next week so it\u0027s a good opportunity to get early feedback on this while I\u0027m out. Feel free to forward to other reviewers as appropriate. This is largely done, but I want to test it in situ a bit more than I had a chance to today. The commit message has one REVIEW TODO scenario that may require a change in NinjaBuildWriter. Also need to make a pass to check if there\u0027s any other new unit tests warranted.",
      "revId": "1829111773933ed7a8dc669016010d3ef9d5a44d",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6dd870bc_a7de343c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2022-07-07T20:23:46Z",
      "side": 1,
      "message": "I was thinking GN would always write the new build in the .tmp file and then as a last step would remove the old build.ninja file and move the new one in place.\n\nI think this will be a lot simpler. The delete + rename should be fast enough that there will be almost no opportunity to get partial state in practice.",
      "revId": "1829111773933ed7a8dc669016010d3ef9d5a44d",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbae0ea2_35f6eb4c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2022-07-07T20:23:59Z",
      "side": 1,
      "message": "Thanks for looking at this, BTW!",
      "revId": "1829111773933ed7a8dc669016010d3ef9d5a44d",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85123e38_d366d288",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001498
      },
      "writtenOn": "2022-07-07T23:37:21Z",
      "side": 1,
      "message": "I\u0027m not sure I understand what change you\u0027re suggesting. The key to this fix is splitting the ninja steps in two, so that ninja won\u0027t delete the build.ninja if interrupted (only the .tmp) while still having the build.ninja.d depfile in build.ninja\u0027s dependency tree (now through the .tmp step). That means the .tmp needs to still exist once regeneration is done, it can\u0027t be renamed to build.ninja.\n\nAm I missing your suggestion here?",
      "parentUuid": "6dd870bc_a7de343c",
      "revId": "1829111773933ed7a8dc669016010d3ef9d5a44d",
      "serverId": "c360c8e5-7aa8-3905-a7a0-810934766dac"
    }
  ]
}